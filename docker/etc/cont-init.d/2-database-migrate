#!/command/with-contenv sh

printf "\nðŸ’¾ Checking database...\n"

if /var/www/stargaze/bin/console -n doctrine:database:create &>/dev/null; then
    printf "\n ðŸ’¾ Successfully created database.\n\n"
else
    printf "\nðŸ’¾ Database already exists or connection aborted.\n\n"
fi

printf "\nðŸ’¾ Running migrations...\n"

if /var/www/stargaze/bin/console -n doctrine:migrations:migrate &>/dev/null; then
    printf "\nðŸ’¾ Migration successful!\n\n"
    exit 0
else
    printf "\nðŸ’¾ Could not run migrations!\n\n"
    exit 1
fi
